join:
  enabled: true
  sources:
  - join_key: user_id
    orientation: left
    source_id: user_logins
    time_window: 1h
  - join_key: user_id
    orientation: right
    source_id: orders
    time_window: 1h
  type: temporal
name: Test Pipeline
pipeline_id: test-pipeline
sink:
  database: default
  host: <host>
  max_batch_size: 1
  max_delay_time: 10m
  password: <password>
  port: "12753"
  http_port: "12754"
  provider: aiven
  secure: true
  table: user_orders
  table_mapping:
  - column_name: session_id
    column_type: String
    field_name: session_id
    source_id: user_logins
  - column_name: user_id
    column_type: String
    field_name: user_id
    source_id: user_logins
  - column_name: order_id
    column_type: String
    field_name: order_id
    source_id: orders
  - column_name: login_at
    column_type: DateTime
    field_name: timestamp
    source_id: user_logins
  - column_name: order_placed_at
    column_type: DateTime
    field_name: timestamp
    source_id: orders
  type: clickhouse
  username: <user>
source:
  connection_params:
    brokers:
    - kafka-broker-0:9092
    - kafka-broker-1:9092
    mechanism: SCRAM-SHA-256
    password: <password>
    protocol: SASL_SSL
    root_ca: <base64 encoded ca>
    skip_auth: false
    username: <user>
  provider: aiven
  topics:
  - consumer_group_initial_offset: earliest
    deduplication:
      enabled: true
      id_field: session_id
      id_field_type: string
      time_window: 12h
    name: user_logins
    schema:
      fields:
      - name: session_id
        type: string
      - name: user_id
        type: string
      - name: timestamp
        type: string
      type: json
  - consumer_group_initial_offset: earliest
    deduplication:
      enabled: true
      id_field: order_id
      id_field_type: string
      time_window: 12h
    name: orders
    schema:
      fields:
      - name: user_id
        type: string
      - name: order_id
        type: string
      - name: timestamp
        type: string
      type: json
  type: kafka
